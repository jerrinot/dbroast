---
layout: base.njk
pagination:
  data: roasts
  size: 10
  alias: paginatedRoasts
permalink: "{% if pagination.pageNumber == 0 %}index.html{% else %}page/{{ pagination.pageNumber }}/index.html{% endif %}"
---

{% if paginatedRoasts.length > 0 %}
  {% for roast in paginatedRoasts %}
    <div class="roast-item">
      <div class="roast-title">
        <a href="{{ '/roast/' | url }}{{ roast.slug }}/" class="roast-title-link">{{ roast.title }}</a>
      </div>
      <div class="roast-subtitle">Originally from {{ roast.originalFeed | replace("https://www.", "") | replace("https://", "") | replace("/blog/rss", "") | replace("/rss.xml", "") | replace("rss", "") }}</div>
      <div class="roast-meta">
        <span class="pub-date">{{ roast.pubDate | date("readable") }}</span>
        {% if roast.personaName %}<span class="roast-author">• Roasted by {{ roast.personaName }}</span>{% endif %}
        <a href="{{ roast.link }}" class="original-link" target="_blank">Read Original Article</a>
      </div>
      <div class="roast-text collapsed" id="roast-{{ loop.index }}">{{ roast.roast | markdown | safe }}</div>
      <button class="expand-button" onclick="toggleRoast('roast-{{ loop.index }}', this)">Read full roast →</button>
    </div>
  {% endfor %}
  
  <!-- Pagination Navigation -->
  {% if pagination.pages.length > 1 %}
    <nav class="pagination">
      {% if pagination.href.previous %}
        <a href="{{ pagination.href.previous | url }}" class="pagination-link pagination-prev">← Previous</a>
      {% endif %}
      
      <span class="pagination-info">
        Page {{ pagination.pageNumber + 1 }} of {{ pagination.pages.length }}
      </span>
      
      {% if pagination.href.next %}
        <a href="{{ pagination.href.next | url }}" class="pagination-link pagination-next">Next →</a>
      {% endif %}
    </nav>
  {% endif %}
{% else %}
  <div class="roast-item">
    <p>No roasts available yet. Make sure you have set up your GEMINI_API_KEY and run the build process!</p>
  </div>
{% endif %}